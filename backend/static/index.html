<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ƒ∞nsan Ekspertizi | Profesyonel Karakter Analizi</title>
    <link rel="icon" type="image/png" href="https://cdn-icons-png.flaticon.com/512/9626/9626780.png">
    <meta name="theme-color" content="#6c5ce7">
    
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root { --primary: #6c5ce7; --primary-dark: #5849be; --secondary: #a29bfe; --accent: #00cec9; --dark: #2d3436; --text-light: #636e72; --bg-light: #f8f9fd; --white: #ffffff; --glass: rgba(255, 255, 255, 0.95); --shadow: 0 15px 35px rgba(0, 0, 0, 0.08); --radius: 24px; --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1); }
        body { font-family: 'Poppins', sans-serif; background: var(--bg-light); margin: 0; color: var(--dark); overflow-x: hidden; line-height: 1.6; }
        ::-webkit-scrollbar { width: 10px; } ::-webkit-scrollbar-track { background: #f1f1f1; } ::-webkit-scrollbar-thumb { background: var(--secondary); border-radius: 5px; }
        nav { background: var(--glass); backdrop-filter: blur(15px); padding: 1rem 5%; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 1000; border-bottom: 1px solid rgba(0,0,0,0.05); }
        .logo { font-size: 1.5rem; font-weight: 800; color: var(--primary); text-decoration: none; display: flex; align-items: center; gap: 12px; }
        .nav-actions { display: flex; gap: 15px; align-items: center; }
        .btn-base { padding: 12px 28px; border-radius: 50px; font-weight: 600; cursor: pointer; transition: var(--transition); border: none; display: flex; align-items: center; gap: 8px; font-size: 0.95rem; }
        .btn-outline { background: transparent; border: 2px solid var(--primary); color: var(--primary); } .btn-outline:hover { background: var(--primary); color: white; transform: translateY(-2px); }
        .btn-fill { background: linear-gradient(135deg, var(--primary), var(--primary-dark)); color: white; box-shadow: 0 4px 15px rgba(108, 92, 231, 0.3); } .btn-fill:hover { transform: translateY(-3px); }
        .hero { text-align: center; padding: 120px 20px 80px; background: linear-gradient(180deg, rgba(108,92,231,0.08) 0%, rgba(255,255,255,0) 100%); position: relative; overflow: hidden; }
        .hero h1 { font-size: 4rem; color: var(--dark); margin: 0 0 25px; line-height: 1.1; font-weight: 800; } 
        /* D√úZELTƒ∞LDƒ∞: background-clip eklendi */
        .hero span { 
            background: linear-gradient(120deg, var(--primary), var(--accent)); 
            -webkit-background-clip: text; 
            background-clip: text; 
            -webkit-text-fill-color: transparent; 
            color: transparent;
        }
        .stats-container { display: flex; justify-content: center; gap: 60px; flex-wrap: wrap; margin-bottom: 60px; } .stat-number { font-size: 2.5rem; font-weight: 800; }
        .tools-grid { max-width: 1100px; margin: 0 auto 100px; padding: 0 20px; display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 40px; }
        .tool-card { background: var(--white); padding: 45px; border-radius: var(--radius); box-shadow: var(--shadow); transition: var(--transition); border: 1px solid white; } .tool-card:hover { transform: translateY(-10px); }
        .card-icon { width: 60px; height: 60px; background: rgba(108, 92, 231, 0.1); border-radius: 18px; display: flex; align-items: center; justify-content: center; color: var(--primary); font-size: 1.8rem; }
        .form-group { margin-bottom: 20px; position: relative; }
        input, textarea { width: 100%; padding: 18px; padding-left: 55px; border: 2px solid #f0f2f5; border-radius: 16px; background: #fdfdfd; font-size: 1rem; box-sizing: border-box; }
        input:focus, textarea:focus { outline: none; border-color: var(--primary); background: var(--white); }
        .input-icon { position: absolute; left: 22px; top: 22px; color: #b2bec3; font-size: 1.2rem; }
        .floating-label { position: absolute; left: 55px; top: 20px; color: #b2bec3; pointer-events: none; transition: 0.2s ease all; }
        input:focus ~ .floating-label, input:not(:placeholder-shown) ~ .floating-label, textarea:focus ~ .floating-label, textarea:not(:placeholder-shown) ~ .floating-label { top: 2px; left: 20px; font-size: 0.75rem; color: var(--primary); font-weight: 600; }
        .submit-btn { width: 100%; padding: 18px; background: var(--dark); color: white; border: none; border-radius: 16px; font-size: 1.1rem; font-weight: 600; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px; transition: var(--transition); } .submit-btn:hover { background: var(--primary); }
        .result-area { margin-top: 30px; padding: 30px; background: #f8f9fa; border-radius: 16px; display: none; line-height: 1.8; color: #4b5563; border-left: 5px solid var(--primary); }
        .features-section { padding: 80px 20px; background: var(--white); } .features-grid { max-width: 1100px; margin: 0 auto; display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 40px; } .feature-item { padding: 30px; border-radius: 20px; border: 1px solid #eee; }
        footer { background: #1e272e; color: white; padding: 60px 20px; text-align: center; margin-top: 80px; }
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); backdrop-filter: blur(8px); z-index: 2000; justify-content: center; align-items: center; }
        .modal-box { background: var(--white); width: 90%; max-width: 420px; padding: 40px; border-radius: 24px; position: relative; box-shadow: 0 30px 60px rgba(0,0,0,0.3); animation: modalPop 0.4s; } @keyframes modalPop { from { opacity:0; transform: scale(0.8); } to { opacity:1; transform: scale(1); } }
        .close-modal { position: absolute; top: 20px; right: 25px; cursor: pointer; font-size: 1.5rem; color: #ccc; }
        @media (max-width: 768px) { .hero h1 { font-size: 2.5rem; } .nav-actions { display: none; } }
    </style>
</head>
<body>

    <nav>
        <a href="#" class="logo"><i class="fa-solid fa-dna fa-lg"></i> ƒ∞nsan Ekspertizi</a>
        <div style="flex:1; margin-left:30px;">
            <a href="/blog" style="text-decoration:none; color:var(--dark); font-weight:600;">Blog</a>
        </div>
        
        <div class="nav-actions" id="guest-nav">
            <button class="btn-base btn-outline" onclick="openModal('loginModal')">Giri≈ü Yap</button>
            <button class="btn-base btn-fill" onclick="openModal('registerModal')">Hemen Ba≈üla</button>
        </div>

        <div class="nav-actions" id="user-nav" style="display: none;">
            <span style="font-weight:600; color:var(--primary); margin-right:10px;">√úye</span>
            <button class="btn-base btn-fill" onclick="logout()" title="√áƒ±kƒ±≈ü"><i class="fa-solid fa-power-off"></i></button>
        </div>
    </nav>

    <section class="hero">
        <h1>Bilin√ßaltƒ±nƒ±n <br> <span>Dijital Haritasƒ±</span></h1>
        <p>Kadim bilgiler ve modern yapay zeka teknolojisi, isminin ve r√ºyalarƒ±nƒ±n gizli ≈üifrelerini √ß√∂zmek i√ßin birle≈üti.</p>
        <div class="stats-container">
            <div class="stat-box"><span class="stat-number">20k+</span><span class="stat-label">Analiz</span></div>
            <div class="stat-box"><span class="stat-number">4.9</span><span class="stat-label">Puan</span></div>
            <div class="stat-box"><span class="stat-number">AI</span><span class="stat-label">Motor</span></div>
        </div>
    </section>

    <section class="tools-grid">
        <div class="tool-card">
            <div class="card-header">
                <div class="card-icon"><i class="fa-solid fa-fingerprint"></i></div>
                <div><h2>ƒ∞sim Analizi</h2><p>ƒ∞sminin enerjisel frekansƒ±nƒ± √∂l√ß.</p></div>
            </div>
            
            <div class="form-group">
                <input type="text" id="isim" placeholder=" ">
                <i class="fa-solid fa-user input-icon"></i>
                <label class="floating-label">Adƒ±nƒ±z</label>
            </div>
            <div class="form-group">
                <input type="text" id="soyisim" placeholder=" ">
                <i class="fa-solid fa-signature input-icon"></i>
                <label class="floating-label">Soyadƒ±nƒ±z</label>
            </div>
            
            <button class="submit-btn" onclick="analyzeName()">
                <i class="fa-solid fa-wand-magic-sparkles"></i> Analiz Et
            </button>
            <div id="isim-sonuc" class="result-area"></div>
        </div>

        <div class="tool-card">
            <div class="card-header">
                <div class="card-icon"><i class="fa-solid fa-moon"></i></div>
                <div><h2>R√ºya Tabiri</h2><p>R√ºyalarƒ±nƒ±n gizli mesajlarƒ±nƒ± oku.</p></div>
            </div>
            
            <div class="form-group">
                <textarea id="ruya-metni" rows="5" placeholder=" " style="resize:none"></textarea>
                <i class="fa-solid fa-pen-nib input-icon" style="top:22px"></i>
                <label class="floating-label">R√ºyanƒ± detaylƒ±ca anlat...</label>
            </div>
            
            <button class="submit-btn" onclick="analyzeDream()">
                <i class="fa-solid fa-eye"></i> Yorumla
            </button>
            <div id="ruya-sonuc" class="result-area"></div>
        </div>
    </section>

    <section class="features-section">
        <div class="features-grid">
            <div class="feature-item"><i class="fa-solid fa-brain" style="font-size:2rem; color:var(--accent);"></i><h3>Google Gemini AI</h3><p>Geli≈ümi≈ü yapay zeka yorumu.</p></div>
            <div class="feature-item"><i class="fa-solid fa-lock" style="font-size:2rem; color:var(--accent);"></i><h3>%100 Gizlilik</h3><p>Verileriniz ≈üifrelenir.</p></div>
            <div class="feature-item"><i class="fa-solid fa-bolt" style="font-size:2rem; color:var(--accent);"></i><h3>Anƒ±nda Sonu√ß</h3><p>Saniyeler i√ßinde rapor.</p></div>
        </div>
    </section>

    <footer>
        <p style="color:rgba(255,255,255,0.5);">&copy; 2026 ƒ∞nsan Ekspertizi.</p>
    </footer>

    <div id="loginModal" class="modal-overlay">
        <div class="modal-box">
            <span class="close-modal" onclick="closeModal('loginModal')">&times;</span>
            <h2 style="text-align:center;">Giri≈ü Yap</h2>
            <div class="form-group"><input type="email" id="loginEmail" placeholder=" "><label class="floating-label">E-posta</label></div>
            <div class="form-group"><input type="password" id="loginPass" placeholder=" "><label class="floating-label">≈ûifre</label></div>
            <button class="submit-btn" onclick="login()">Giri≈ü Yap</button>
        </div>
    </div>

    <div id="registerModal" class="modal-overlay">
        <div class="modal-box">
            <span class="close-modal" onclick="closeModal('registerModal')">&times;</span>
            <h2 style="text-align:center;">Kayƒ±t Ol</h2>
            <div class="form-group"><input type="email" id="regEmail" placeholder=" "><label class="floating-label">E-posta</label></div>
            <div class="form-group"><input type="password" id="regPass" placeholder=" "><label class="floating-label">≈ûifre</label></div>
            <button class="submit-btn" onclick="register()">Kayƒ±t Ol</button>
        </div>
    </div>

    <div id="gate-modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:9999; align-items:center; justify-content:center; backdrop-filter:blur(5px);">
        <div style="background:white; padding:40px; border-radius:24px; text-align:center; max-width:400px; width:90%; position:relative; box-shadow:0 20px 50px rgba(0,0,0,0.3);">
            <button onclick="closeGate()" style="position:absolute; top:15px; right:15px; background:none; border:none; font-size:1.5rem; cursor:pointer; color:#999;">&times;</button>
            <div style="font-size:3rem; margin-bottom:20px;">üîí</div>
            <h2 style="color:#2d3436; margin-bottom:10px;">Analiziniz Hazƒ±r!</h2>
            <p style="color:#636e72; margin-bottom:30px;">Sonu√ßlarƒ± g√∂rmek i√ßin l√ºtfen √ºcretsiz hesabƒ±nƒ±zƒ± olu≈üturun.</p>
            <button onclick="closeGate(); openModal('registerModal')" style="width:100%; background:#6c5ce7; color:white; padding:15px; border:none; border-radius:12px; font-weight:bold; font-size:1.1rem; cursor:pointer; margin-bottom:15px;">√úcretsiz Hesap Olu≈ütur</button>
            <button onclick="closeGate(); openModal('loginModal')" style="width:100%; background:#f1f2f6; color:#2d3436; padding:15px; border:none; border-radius:12px; font-weight:bold; cursor:pointer;">Giri≈ü Yap</button>
        </div>
    </div>

    <script>
        // --- YARDIMCI FONKSƒ∞YONLAR ---
        function checkElement(id) {
            const el = document.getElementById(id);
            if(!el) console.error("Eleman bulunamadƒ±:", id);
            return el;
        }

        function openModal(id) { document.getElementById(id).style.display = 'flex'; }
        function closeModal(id) { document.getElementById(id).style.display = 'none'; }
        
        // --- GATE Sƒ∞STEMƒ∞ ---
        function showGate() { document.getElementById('gate-modal').style.display = 'flex'; }
        function closeGate() { document.getElementById('gate-modal').style.display = 'none'; }

        // --- AUTH DURUMU ---
        function checkLoginStatus() {
            const token = localStorage.getItem("token");
            if(token) {
                document.getElementById("guest-nav").style.display = "none";
                document.getElementById("user-nav").style.display = "flex";
            } else {
                document.getElementById("guest-nav").style.display = "flex";
                document.getElementById("user-nav").style.display = "none";
            }
        }
        function logout() { localStorage.removeItem("token"); window.location.reload(); }

        // --- API ƒ∞≈ûLEMLERƒ∞ (KAYIT & Gƒ∞Rƒ∞≈û) ---
        async function login() {
            const email = document.getElementById("loginEmail").value;
            const pass = document.getElementById("loginPass").value;
            const fd = new FormData(); fd.append("username", email); fd.append("password", pass);
            try {
                const res = await fetch("/api/token", { method: "POST", body: fd });
                if(res.ok) {
                    const data = await res.json();
                    localStorage.setItem("token", data.access_token);
                    window.location.reload();
                } else alert("Hatalƒ± giri≈ü!");
            } catch(e) { alert("Sunucu hatasƒ±"); }
        }

        async function register() {
            const email = document.getElementById("regEmail").value;
            const pass = document.getElementById("regPass").value;
            try {
                const res = await fetch("/api/register", {
                    method: "POST",
                    headers: {"Content-Type": "application/json"},
                    body: JSON.stringify({email, password: pass})
                });
                if(res.ok) {
                    closeModal('registerModal');
                    openModal('loginModal');
                    alert("Kayƒ±t ba≈üarƒ±lƒ±! Giri≈ü yapabilirsiniz.");
                } else alert("Kayƒ±t hatasƒ±.");
            } catch(e) { alert("Sunucu hatasƒ±"); }
        }

        // --- ANALƒ∞Z MOTORLARI (KAPICI DAHƒ∞L) ---
        async function analyzeName() {
            const isim = document.getElementById("isim").value;
            const soyisim = document.getElementById("soyisim").value;
            if(!isim || !soyisim) { alert("L√ºtfen isim girin."); return; }

            // KAPICI KONTROL√ú
            if(!localStorage.getItem("token")) { showGate(); return; }

            const resDiv = document.getElementById("isim-sonuc");
            resDiv.style.display = "block";
            resDiv.innerHTML = "‚è≥ Analiz yapƒ±lƒ±yor...";
            
            const fd = new FormData(); fd.append("isim", isim); fd.append("soyisim", soyisim);
            
            try {
                const res = await fetch("/api/isim-analizi-yap", {
                    method: "POST",
                    headers: { "Authorization": `Bearer ${localStorage.getItem("token")}` },
                    body: fd
                });
                if(res.ok) {
                    const data = await res.json();
                    resDiv.innerHTML = data.analiz_sonucu.replace(/\n/g, "<br>");
                } else {
                    if(res.status === 401) { logout(); showGate(); }
                    else resDiv.innerHTML = "Hata olu≈ütu.";
                }
            } catch(e) { resDiv.innerHTML = "Baƒülantƒ± hatasƒ±."; }
        }

        async function analyzeDream() {
            const ruya = document.getElementById("ruya-metni").value;
            if(!ruya) { alert("L√ºtfen r√ºya girin."); return; }

            // KAPICI KONTROL√ú
            if(!localStorage.getItem("token")) { showGate(); return; }

            const resDiv = document.getElementById("ruya-sonuc");
            resDiv.style.display = "block";
            resDiv.innerHTML = "‚è≥ R√ºya yorumlanƒ±yor...";

            const fd = new FormData(); fd.append("ruya_metni", ruya);

            try {
                const res = await fetch("/api/ruya-analizi", {
                    method: "POST",
                    headers: { "Authorization": `Bearer ${localStorage.getItem("token")}` },
                    body: fd
                });
                if(res.ok) {
                    const data = await res.json();
                    resDiv.innerHTML = data.analiz.replace(/\n/g, "<br>");
                } else {
                    if(res.status === 401) { logout(); showGate(); }
                    else resDiv.innerHTML = "Hata olu≈ütu.";
                }
            } catch(e) { resDiv.innerHTML = "Baƒülantƒ± hatasƒ±."; }
        }

        window.onload = checkLoginStatus;
    </script>
</body>
</html>